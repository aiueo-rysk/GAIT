# クラウド

クラウドコンピューティングに関する知識です。

## 出題範囲

- クラウドサービス
- 仮想化技術
- コンテナ

---

## クラウドの基本

### クラウドの特徴（NIST定義）

| 特徴 | 説明 |
|------|------|
| オンデマンドセルフサービス | 必要な時に自分で調達 |
| 幅広いネットワークアクセス | 様々なデバイスからアクセス |
| リソースプーリング | リソースを共有・動的割当 |
| 迅速な拡張性 | スケールアップ/ダウンが容易 |
| 従量課金 | 使った分だけ支払い |

### サービスモデル

| モデル | 管理範囲 | 例 |
|--------|---------|-----|
| IaaS | インフラのみ提供 | AWS EC2, Azure VM |
| PaaS | プラットフォームまで提供 | Heroku, GAE |
| SaaS | アプリケーションまで提供 | Gmail, Salesforce |

```
┌─────────────────────────────────────────┐
│  SaaS  │ アプリケーション              │
├────────┼────────────────────────────────┤
│  PaaS  │ ミドルウェア/ランタイム       │
├────────┼────────────────────────────────┤
│  IaaS  │ OS/仮想化/サーバー/ストレージ │
└────────┴────────────────────────────────┘
```

### デプロイモデル

| モデル | 説明 |
|--------|------|
| パブリッククラウド | 一般公開、マルチテナント |
| プライベートクラウド | 単一組織専用 |
| ハイブリッドクラウド | パブリック＋プライベート |
| マルチクラウド | 複数のクラウドベンダー利用 |

---

## 主要クラウドプロバイダー

### AWS（Amazon Web Services）

| サービス | 機能 |
|---------|------|
| EC2 | 仮想サーバー |
| S3 | オブジェクトストレージ |
| RDS | マネージドデータベース |
| Lambda | サーバーレス関数 |
| VPC | 仮想ネットワーク |
| IAM | アクセス管理 |
| CloudFront | CDN |
| Route 53 | DNS |

### Microsoft Azure

| サービス | 機能 |
|---------|------|
| Virtual Machines | 仮想サーバー |
| Blob Storage | オブジェクトストレージ |
| Azure SQL | マネージドDB |
| Azure Functions | サーバーレス |
| Azure AD | 認証・ID管理 |

### Google Cloud Platform（GCP）

| サービス | 機能 |
|---------|------|
| Compute Engine | 仮想サーバー |
| Cloud Storage | オブジェクトストレージ |
| Cloud SQL | マネージドDB |
| Cloud Functions | サーバーレス |
| BigQuery | データウェアハウス |

---

## 仮想化技術

### 仮想化の種類

| 種類 | 説明 | 例 |
|------|------|-----|
| サーバー仮想化 | 1台の物理サーバーで複数VM | VMware, Hyper-V |
| ストレージ仮想化 | 複数ストレージを統合 | vSAN |
| ネットワーク仮想化 | 物理NWを論理的に分割 | SDN, VLAN |
| デスクトップ仮想化 | デスクトップを仮想化 | VDI |

### ハイパーバイザー

| 種類 | 説明 | 例 |
|------|------|-----|
| Type 1（ベアメタル） | HW上で直接動作 | VMware ESXi, Hyper-V |
| Type 2（ホスト型） | ホストOS上で動作 | VirtualBox, VMware Workstation |

---

## コンテナ技術

### Dockerの基本

| 概念 | 説明 |
|------|------|
| イメージ | コンテナのテンプレート |
| コンテナ | イメージから起動した実行環境 |
| Dockerfile | イメージ作成の設計書 |
| レジストリ | イメージの保管場所 |

**主要コマンド**
```bash
# イメージ取得
docker pull イメージ名

# コンテナ起動
docker run -d -p 80:80 イメージ名

# コンテナ一覧
docker ps

# イメージビルド
docker build -t イメージ名 .
```

### コンテナ vs 仮想マシン

| 項目 | コンテナ | 仮想マシン |
|------|---------|-----------|
| 起動時間 | 秒単位 | 分単位 |
| リソース効率 | 高い | 低い |
| 分離性 | プロセスレベル | 完全分離 |
| 可搬性 | 高い | 中程度 |

### Kubernetes（K8s）

コンテナオーケストレーションプラットフォーム。

| 概念 | 説明 |
|------|------|
| Pod | 最小デプロイ単位（1つ以上のコンテナ） |
| Node | コンテナを実行するマシン |
| Cluster | Nodeの集合 |
| Deployment | Podのデプロイ管理 |
| Service | Podへのアクセス方法定義 |
| Ingress | 外部からのHTTPルーティング |

**マネージドKubernetes**
| サービス | プロバイダー |
|---------|-------------|
| EKS | AWS |
| AKS | Azure |
| GKE | Google Cloud |

---

## サーバーレス

### 特徴

- サーバー管理不要
- 自動スケーリング
- イベント駆動
- 従量課金（実行時間単位）

### FaaS（Function as a Service）

| サービス | プロバイダー |
|---------|-------------|
| AWS Lambda | AWS |
| Azure Functions | Microsoft |
| Cloud Functions | Google |

### ユースケース

- APIバックエンド
- イベント処理
- 定期バッチ処理
- ファイル処理

---

## クラウドネイティブ

### 12 Factor App

クラウドネイティブアプリケーションの設計原則。

| 要素 | 説明 |
|------|------|
| コードベース | 1アプリ1リポジトリ |
| 依存関係 | 明示的に宣言・分離 |
| 設定 | 環境変数で管理 |
| バックエンドサービス | アタッチされたリソース |
| ビルド・リリース・実行 | 厳密に分離 |
| プロセス | ステートレスプロセス |
| ポートバインディング | ポート経由でサービス公開 |
| 並行性 | プロセスモデルでスケール |
| 廃棄容易性 | 高速起動・グレースフルシャットダウン |
| 開発/本番一致 | 環境差異を最小化 |
| ログ | イベントストリームとして扱う |
| 管理プロセス | 一回限りのプロセスとして実行 |

### Infrastructure as Code（IaC）

| ツール | 特徴 |
|--------|------|
| Terraform | マルチクラウド対応 |
| CloudFormation | AWS専用 |
| Ansible | エージェントレス |
| Pulumi | 一般プログラミング言語で記述 |

---

## クラウドセキュリティ

### 責任共有モデル

| 項目 | IaaS | PaaS | SaaS |
|------|------|------|------|
| データ | 顧客 | 顧客 | 顧客 |
| アプリケーション | 顧客 | 顧客 | プロバイダー |
| OS | 顧客 | プロバイダー | プロバイダー |
| 仮想化 | プロバイダー | プロバイダー | プロバイダー |
| 物理インフラ | プロバイダー | プロバイダー | プロバイダー |

### セキュリティサービス

| 機能 | AWS | Azure |
|------|-----|-------|
| ID管理 | IAM | Azure AD |
| 暗号化 | KMS | Key Vault |
| 監査 | CloudTrail | Monitor |
| WAF | AWS WAF | Azure WAF |

---

## 重要用語

| 用語 | 説明 |
|------|------|
| リージョン | データセンターの地理的エリア |
| アベイラビリティゾーン | リージョン内の独立したデータセンター |
| エッジロケーション | CDN用の配信拠点 |
| オートスケーリング | 負荷に応じて自動増減 |
| ロードバランサー | 負荷分散装置 |
| CDN | Content Delivery Network |
| API Gateway | APIの管理・公開 |
| マイクロサービス | 小さなサービスの集合体 |
