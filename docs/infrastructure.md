# インフラストラクチャ

ITシステムの基盤となるハードウェアやネットワーク機器に関する知識です。

## 出題範囲

- ストレージ
- ネットワーク
- サーバー

---

## ストレージ

### RAID（Redundant Arrays of Inexpensive Disks）

複数のディスクを組み合わせて、信頼性や性能を向上させる技術。

| RAIDレベル | 特徴 | 最低台数 | 冗長性 |
|-----------|------|---------|--------|
| RAID 0 | ストライピング（分散書込み） | 2台 | なし |
| RAID 1 | ミラーリング（複製） | 2台 | 1台故障OK |
| RAID 5 | パリティ分散 | 3台 | 1台故障OK |
| RAID 6 | 二重パリティ | 4台 | 2台故障OK |
| RAID 10 | RAID 1+0（ミラー+ストライプ） | 4台 | 各組1台OK |

### ストレージの種類

| 種類 | 説明 |
|------|------|
| DAS | Direct Attached Storage。サーバーに直接接続 |
| NAS | Network Attached Storage。ファイル単位でネットワーク共有 |
| SAN | Storage Area Network。ブロック単位の高速ストレージネットワーク |

### バックアップ方式

| 方式 | 説明 | 容量 | 復元時間 |
|------|------|------|---------|
| フルバックアップ | 全データをバックアップ | 大 | 短い |
| 差分バックアップ | 最後のフルからの差分 | 中 | 中程度 |
| 増分バックアップ | 前回バックアップからの差分 | 小 | 長い |

---

## ネットワーク

### OSI参照モデル

| 層 | 名称 | 役割 | プロトコル例 |
|----|------|------|-------------|
| 7 | アプリケーション層 | アプリケーション間通信 | HTTP, FTP, SMTP |
| 6 | プレゼンテーション層 | データ形式変換 | SSL/TLS, JPEG |
| 5 | セッション層 | 通信の開始・終了管理 | NetBIOS |
| 4 | トランスポート層 | 信頼性のある通信 | TCP, UDP |
| 3 | ネットワーク層 | ルーティング | IP, ICMP |
| 2 | データリンク層 | 隣接ノード間通信 | Ethernet, PPP |
| 1 | 物理層 | 電気信号・光信号 | RS-232C |

### TCP/IPモデル

| 層 | OSI対応 | プロトコル例 |
|----|---------|-------------|
| アプリケーション層 | 5-7層 | HTTP, DNS, SMTP |
| トランスポート層 | 4層 | TCP, UDP |
| インターネット層 | 3層 | IP, ICMP, ARP |
| ネットワークインターフェース層 | 1-2層 | Ethernet |

### 主要プロトコル

| プロトコル | ポート | 用途 |
|-----------|--------|------|
| HTTP | 80 | Webページ取得 |
| HTTPS | 443 | 暗号化Web通信 |
| FTP | 20, 21 | ファイル転送 |
| SSH | 22 | 暗号化リモート接続 |
| SMTP | 25 | メール送信 |
| DNS | 53 | ドメイン名解決 |
| DHCP | 67, 68 | IPアドレス自動割当 |

### IPアドレス

**IPv4**
- 32ビット（例：192.168.1.1）
- クラスA/B/C/D/E

**プライベートIPアドレス**
| クラス | 範囲 |
|--------|------|
| A | 10.0.0.0 - 10.255.255.255 |
| B | 172.16.0.0 - 172.31.255.255 |
| C | 192.168.0.0 - 192.168.255.255 |

**サブネットマスク**
- ネットワーク部とホスト部を区別
- /24 = 255.255.255.0（256アドレス）

### ネットワーク機器

| 機器 | OSI層 | 機能 |
|------|-------|------|
| リピータ | 1層 | 信号増幅 |
| ブリッジ | 2層 | MACアドレスでフィルタリング |
| スイッチ | 2層 | MACアドレスで転送先決定 |
| ルータ | 3層 | IPアドレスでルーティング |
| L4スイッチ | 4層 | ポート番号で負荷分散 |
| L7スイッチ | 7層 | アプリケーション内容で振分け |

---

## サーバー

### サーバーの種類

| 種類 | 用途 |
|------|------|
| Webサーバー | HTTPリクエスト処理（Apache, Nginx, IIS） |
| APサーバー | アプリケーション実行（Tomcat, JBoss） |
| DBサーバー | データベース管理（MySQL, PostgreSQL, Oracle） |
| メールサーバー | メール送受信（Postfix, Exchange） |
| DNSサーバー | ドメイン名解決（BIND） |
| プロキシサーバー | 中継・キャッシュ（Squid） |

### 可用性向上

| 技術 | 説明 |
|------|------|
| クラスタリング | 複数サーバーを1つに見せる |
| 冗長化 | 予備系を用意 |
| 負荷分散 | ロードバランサーで分散 |
| フェイルオーバー | 障害時に自動切替 |

### 仮想化

| 方式 | 説明 |
|------|------|
| ホスト型 | ホストOS上に仮想化ソフトをインストール |
| ハイパーバイザー型 | ハードウェア上で直接動作（Type1） |
| コンテナ型 | OSカーネルを共有（Docker） |

---

## 重要用語

| 用語 | 説明 |
|------|------|
| MTBF | Mean Time Between Failures（平均故障間隔） |
| MTTR | Mean Time To Repair（平均修復時間） |
| 稼働率 | MTBF / (MTBF + MTTR) |
| SLA | Service Level Agreement（サービス品質保証） |
| スループット | 単位時間あたりの処理量 |
| レイテンシ | 応答時間・遅延 |
